name: Vite Test
description: Runs Vitest tests and build

inputs:
  monorepo:
    default: 'false'
    description: "Set mode to 'monorepo' or 'single'."
    required: false

runs:
  using: composite
  steps:
    - name: Vitest (monorepo)
      if: ${{ inputs.monorepo == 'true' }}
      shell: bash
      run: |
        pnpm exec turbo run test

    - name: Vitest
      if: ${{ inputs.monorepo != 'true' }}
      shell: bash
      run: |
        pnpm test

    - name: Build (monorepo)
      if: ${{ inputs.monorepo == 'true' }}
      shell: bash
      run: |
        pnpm exec turbo run build

    - name: Build
      if: ${{ inputs.monorepo != 'true' }}
      shell: bash
      run: |
        pnpm build
